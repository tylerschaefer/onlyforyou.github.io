<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nur f√ºr dich bestimmt</title>
  <meta name="description" content="Eine pers√∂nliche Liebesbotschaft mit verschiedenen Kategorien voller liebevoller Worte.">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Nunito:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --background: hsl(30, 50%, 98%);
      --foreground: hsl(350, 30%, 20%);
      --card: hsl(30, 40%, 96%);
      --primary: hsl(350, 60%, 65%);
      --primary-foreground: hsl(30, 50%, 98%);
      --muted: hsl(30, 20%, 90%);
      --muted-foreground: hsl(350, 20%, 45%);
      --border: hsl(350, 30%, 85%);
      --rose-soft: hsl(350, 80%, 90%);
      --rose-deep: hsl(350, 50%, 55%);
      --gradient-romantic: linear-gradient(135deg, hsl(350, 80%, 92%), hsl(30, 50%, 95%), hsl(350, 70%, 88%));
      --gradient-card: linear-gradient(145deg, hsl(30, 40%, 98%), hsl(350, 30%, 96%));
      --shadow-soft: 0 4px 20px -4px hsla(350, 60%, 65%, 0.2);
      --shadow-card: 0 8px 30px -8px hsla(350, 40%, 50%, 0.15);
      --shadow-glow: 0 0 40px hsla(350, 60%, 75%, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Nunito', sans-serif;
      background: var(--gradient-romantic);
      min-height: 100vh;
      color: var(--foreground);
    }

    h1, h2, h3, h4 {
      font-family: 'Playfair Display', serif;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem 1rem 4rem;
    }

    /* Header */
    .header {
      text-align: center;
      margin-bottom: 3rem;
      animation: fadeIn 0.6s ease-out;
    }

    .header-hearts {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .header-hearts span {
      font-size: 1.5rem;
      animation: float 6s ease-in-out infinite;
    }

    .header-hearts span:nth-child(2) {
      animation-delay: 0.5s;
    }

    .header-hearts span:nth-child(3) {
      animation-delay: 1s;
    }

    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--foreground);
    }

    .header p {
      color: var(--muted-foreground);
      font-size: 1.1rem;
      max-width: 400px;
      margin: 0 auto;
    }

    .locked-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1.5rem;
      padding: 0.5rem 1rem;
      background: var(--rose-soft);
      border-radius: 9999px;
      font-size: 0.875rem;
    }

    /* Category Grid */
    .category-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .category-card {
      background: var(--gradient-card);
      border: 1px solid hsla(350, 30%, 85%, 0.5);
      border-radius: 1rem;
      padding: 1.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      box-shadow: var(--shadow-card);
      animation: slideUp 0.5s ease-out backwards;
    }

    .category-card:hover {
      transform: scale(1.02);
      box-shadow: var(--shadow-glow);
      border-color: hsla(350, 60%, 65%, 0.3);
    }

    .category-card.selected {
      ring: 2px solid var(--primary);
      transform: scale(1.02);
    }

    .category-card .emoji {
      font-size: 2.5rem;
      margin-bottom: 0.75rem;
    }

    .category-card h3 {
      font-size: 1.25rem;
      margin-bottom: 0.5rem;
    }

    .category-card .preview {
      color: var(--muted-foreground);
      font-size: 0.875rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .category-card .heart-icon {
      position: absolute;
      top: -0.5rem;
      right: -0.5rem;
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 1.25rem;
      animation: float 6s ease-in-out infinite;
    }

    .category-card:hover .heart-icon {
      opacity: 1;
    }

    .category-card .edit-buttons {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      display: flex;
      gap: 0.5rem;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .category-card:hover .edit-buttons {
      opacity: 1;
    }

    /* Add Card */
    .add-card {
      border: 2px dashed hsla(350, 30%, 85%, 0.6);
      border-radius: 1rem;
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 180px;
      cursor: pointer;
      transition: all 0.3s;
      background: transparent;
    }

    .add-card:hover {
      border-color: hsla(350, 60%, 65%, 0.5);
      background: hsla(350, 80%, 90%, 0.3);
    }

    .add-card .plus {
      font-size: 2.5rem;
      color: var(--muted-foreground);
      transition: color 0.3s;
    }

    .add-card:hover .plus {
      color: var(--primary);
    }

    .add-card span {
      margin-top: 0.5rem;
      color: var(--muted-foreground);
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.625rem 1rem;
      border-radius: 0.5rem;
      font-family: 'Nunito', sans-serif;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
    }

    .btn-romantic {
      background: linear-gradient(135deg, var(--primary), var(--rose-deep));
      color: var(--primary-foreground);
      box-shadow: var(--shadow-soft);
      padding: 0.75rem 2rem;
      font-size: 1rem;
      border-radius: 0.75rem;
    }

    .btn-romantic:hover {
      box-shadow: var(--shadow-glow);
      transform: scale(1.05);
    }

    .btn-soft {
      background: var(--rose-soft);
      color: var(--foreground);
    }

    .btn-soft:hover {
      background: hsl(350, 60%, 75%);
      color: var(--primary-foreground);
    }

    .btn-outline {
      background: transparent;
      border: 1px solid hsla(350, 60%, 65%, 0.3);
      color: var(--foreground);
    }

    .btn-outline:hover {
      background: hsla(350, 60%, 65%, 0.1);
      border-color: var(--primary);
    }

    .btn-ghost {
      background: transparent;
      color: var(--muted-foreground);
    }

    .btn-ghost:hover {
      background: hsla(350, 60%, 65%, 0.1);
      color: var(--foreground);
    }

    .btn-icon {
      width: 2rem;
      height: 2rem;
      padding: 0;
    }

    /* Detail View */
    .detail-view {
      animation: fadeIn 0.5s ease-out;
    }

    .detail-card {
      background: var(--gradient-card);
      border: 1px solid hsla(350, 30%, 85%, 0.5);
      border-radius: 1.5rem;
      padding: 2rem;
      box-shadow: var(--shadow-card);
      position: relative;
      overflow: hidden;
    }

    @media (min-width: 768px) {
      .detail-card {
        padding: 3rem;
      }
    }

    .detail-card .bg-heart {
      position: absolute;
      opacity: 0.15;
      font-size: 6rem;
    }

    .detail-card .bg-heart.top {
      top: 1rem;
      right: 1rem;
    }

    .detail-card .bg-heart.bottom {
      bottom: 1rem;
      left: 1rem;
      font-size: 4rem;
      opacity: 0.1;
    }

    .detail-content {
      position: relative;
      z-index: 1;
    }

    .detail-emoji {
      font-size: 4rem;
      margin-bottom: 1.5rem;
      animation: float 6s ease-in-out infinite;
    }

    .detail-title {
      font-size: 2rem;
      margin-bottom: 2rem;
    }

    @media (min-width: 768px) {
      .detail-title {
        font-size: 2.5rem;
      }
    }

    .detail-text {
      font-size: 1.125rem;
      line-height: 1.8;
      white-space: pre-wrap;
      color: hsla(350, 30%, 20%, 0.9);
    }

    @media (min-width: 768px) {
      .detail-text {
        font-size: 1.25rem;
      }
    }

    /* Form Elements */
    .input, .textarea {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid var(--border);
      border-radius: 0.5rem;
      font-family: 'Nunito', sans-serif;
      font-size: 1rem;
      background: hsla(30, 50%, 98%, 0.5);
      transition: border-color 0.3s;
    }

    .input:focus, .textarea:focus {
      outline: none;
      border-color: var(--primary);
    }

    .input.title-input {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      font-weight: 600;
      text-align: center;
    }

    .textarea {
      min-height: 300px;
      resize: none;
      line-height: 1.6;
    }

    .emoji-selector {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .emoji-btn {
      font-size: 1.5rem;
      padding: 0.5rem;
      border-radius: 0.5rem;
      background: transparent;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
    }

    .emoji-btn:hover {
      background: var(--rose-soft);
      transform: scale(1.1);
    }

    .emoji-btn.selected {
      background: var(--rose-soft);
      box-shadow: 0 0 0 2px var(--primary);
    }

    .form-label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--muted-foreground);
      margin-bottom: 0.5rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: hsla(0, 0%, 0%, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      z-index: 100;
      animation: fadeIn 0.2s ease-out;
    }

    .modal {
      background: var(--gradient-card);
      border-radius: 1rem;
      padding: 1.5rem;
      max-width: 400px;
      width: 100%;
      box-shadow: var(--shadow-card);
      animation: slideUp 0.3s ease-out;
    }

    .modal-header {
      margin-bottom: 1.5rem;
    }

    .modal-title {
      font-size: 1.5rem;
    }

    .modal-actions {
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
      margin-top: 1.5rem;
    }

    .modal-actions.center {
      flex-direction: column;
    }

    .modal-icon {
      width: 4rem;
      height: 4rem;
      background: var(--rose-soft);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      font-size: 2rem;
    }

    .modal-description {
      color: var(--muted-foreground);
      text-align: center;
      margin-bottom: 1.5rem;
    }

    /* Action Section */
    .action-section {
      text-align: center;
      margin-top: 3rem;
      animation: fadeIn 0.6s ease-out;
    }

    .action-section .warning {
      margin-top: 1rem;
      font-size: 0.875rem;
      color: var(--muted-foreground);
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from { 
        opacity: 0; 
        transform: translateY(20px); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0); 
      }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header" id="header">
      <div class="header-hearts">
        <span>üíï</span>
        <span>‚ú®</span>
        <span>üíï</span>
      </div>
      <div id="header-display">
        <h1 id="main-title">F√ºr dich ‚ô°</h1>
        <p id="main-subtitle">Klicke auf eine Kategorie, um zu lesen was ich dir sagen m√∂chte...</p>
      </div>
      <div id="header-edit" class="hidden">
        <input type="text" class="input title-input" id="title-input" placeholder="Titel...">
        <input type="text" class="input" id="subtitle-input" placeholder="Untertitel..." style="margin-top: 1rem; text-align: center;">
        <button class="btn btn-soft" onclick="saveHeader()" style="margin-top: 1rem;">Fertig</button>
      </div>
      <div id="locked-badge" class="locked-badge hidden">
        üîí <span>F√ºr immer gespeichert</span>
      </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
      <!-- Category Grid -->
      <div class="category-grid" id="category-grid"></div>

      <!-- Action Section -->
      <div class="action-section" id="action-section">
        <button class="btn btn-romantic" onclick="showLockModal()">
          üîí F√ºr immer speichern
        </button>
        <p class="warning">Achtung: Nach dem Speichern kann nichts mehr ge√§ndert werden!</p>
      </div>
    </main>

    <!-- Detail View -->
    <div class="detail-view hidden" id="detail-view">
      <button class="btn btn-ghost" onclick="goBack()" style="margin-bottom: 1.5rem;">
        ‚Üê Zur√ºck
      </button>
      <div class="detail-card">
        <div class="bg-heart top">üíï</div>
        <div class="bg-heart bottom">üíï</div>
        <div class="detail-content" id="detail-content"></div>
      </div>
    </div>
  </div>

  <!-- Add Category Modal -->
  <div class="modal-overlay hidden" id="add-modal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Neue Kategorie</h2>
      </div>
      <div class="form-group">
        <label class="form-label">Emoji w√§hlen</label>
        <div class="emoji-selector" id="add-emoji-selector"></div>
      </div>
      <div class="form-group">
        <label class="form-label">Kategorie-Titel</label>
        <input type="text" class="input" id="add-title-input" placeholder="z.B. Unsere Erinnerungen">
      </div>
      <div class="modal-actions">
        <button class="btn btn-outline" onclick="closeAddModal()">Abbrechen</button>
        <button class="btn btn-romantic" onclick="addCategory()">Hinzuf√ºgen</button>
      </div>
    </div>
  </div>

  <!-- Lock Confirm Modal -->
  <div class="modal-overlay hidden" id="lock-modal">
    <div class="modal" style="text-align: center;">
      <div class="modal-icon">üîí</div>
      <h2 class="modal-title">F√ºr immer speichern?</h2>
      <p class="modal-description">
        Wenn du speicherst, kann nichts mehr bearbeitet werden. Deine Liebesbotschaft wird f√ºr immer so bleiben, wie sie jetzt ist.
      </p>
      <div class="modal-actions center">
        <button class="btn btn-romantic" onclick="lockNote()" style="width: 100%;">
          üíï Ja, f√ºr immer speichern
        </button>
        <button class="btn btn-outline" onclick="closeLockModal()" style="width: 100%;">
          Noch nicht fertig
        </button>
      </div>
    </div>
  </div>

  <script>
    // Data
    const STORAGE_KEY = 'love-note-data';
    const EMOJIS = ['üíï', '‚ú®', 'üå∏', 'üí´', 'ü¶ã', 'üåπ', 'üíñ', 'üå∑', 'üíù', 'üçÄ', '‚òÄÔ∏è', 'üåà'];
    
    let data = loadData();
    let selectedCategoryId = null;
    let selectedEmoji = 'üíï';

    function loadData() {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (stored) {
        try {
          return JSON.parse(stored);
        } catch (e) {
          return getDefaultData();
        }
      }
      return getDefaultData();
    }

    function getDefaultData() {
      return {
        title: 'F√ºr dich ‚ô°',
        subtitle: 'Klicke auf eine Kategorie, um zu lesen was ich dir sagen m√∂chte...',
        categories: [
          { id: '1', title: 'Warum ich dich liebe', content: '', emoji: 'üíï' },
          { id: '2', title: 'Unsere sch√∂nsten Momente', content: '', emoji: '‚ú®' },
          { id: '3', title: 'Was ich dir verspreche', content: '', emoji: 'üí´' }
        ],
        isLocked: false
      };
    }

    function saveData() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    function render() {
      // Update header
      document.getElementById('main-title').textContent = data.title;
      document.getElementById('main-subtitle').textContent = data.subtitle;
      document.getElementById('locked-badge').classList.toggle('hidden', !data.isLocked);
      document.getElementById('action-section').classList.toggle('hidden', data.isLocked);

      // Render category grid
      const grid = document.getElementById('category-grid');
      grid.innerHTML = '';

      data.categories.forEach((cat, index) => {
        const card = document.createElement('div');
        card.className = 'category-card';
        card.style.animationDelay = `${index * 0.1}s`;
        card.onclick = () => showDetail(cat.id);
        
        card.innerHTML = `
          <span class="heart-icon">üíï</span>
          ${!data.isLocked ? `
            <div class="edit-buttons">
              <button class="btn btn-soft btn-icon" onclick="event.stopPropagation(); editCategory('${cat.id}')">‚úèÔ∏è</button>
              <button class="btn btn-outline btn-icon" onclick="event.stopPropagation(); deleteCategory('${cat.id}')">üóëÔ∏è</button>
            </div>
          ` : ''}
          <div class="emoji">${cat.emoji}</div>
          <h3>${cat.title}</h3>
          <p class="preview">${cat.content || 'Noch kein Text...'}</p>
        `;
        grid.appendChild(card);
      });

      // Add button (only in edit mode)
      if (!data.isLocked) {
        const addCard = document.createElement('button');
        addCard.className = 'add-card';
        addCard.onclick = showAddModal;
        addCard.innerHTML = `
          <span class="plus">+</span>
          <span>Kategorie hinzuf√ºgen</span>
        `;
        grid.appendChild(addCard);
      }
    }

    function showDetail(id) {
      selectedCategoryId = id;
      const cat = data.categories.find(c => c.id === id);
      if (!cat) return;

      document.getElementById('header').classList.add('hidden');
      document.getElementById('main-content').classList.add('hidden');
      document.getElementById('detail-view').classList.remove('hidden');

      const content = document.getElementById('detail-content');
      
      if (data.isLocked) {
        content.innerHTML = `
          <div class="detail-emoji">${cat.emoji}</div>
          <h2 class="detail-title">${cat.title}</h2>
          <p class="detail-text">${cat.content || 'Noch kein Text vorhanden...'}</p>
        `;
      } else {
        content.innerHTML = `
          <div class="form-group">
            <label class="form-label">Emoji w√§hlen</label>
            <div class="emoji-selector" id="detail-emoji-selector"></div>
          </div>
          <div class="form-group">
            <label class="form-label">Kategorie-Titel</label>
            <input type="text" class="input" id="detail-title" value="${cat.title}" placeholder="z.B. Warum ich dich liebe...">
          </div>
          <div class="form-group">
            <label class="form-label">Dein Text</label>
            <textarea class="textarea" id="detail-text" placeholder="Schreibe hier deinen liebevollen Text...">${cat.content}</textarea>
          </div>
        `;
        
        renderEmojiSelector('detail-emoji-selector', cat.emoji, (emoji) => {
          cat.emoji = emoji;
          saveData();
        });

        document.getElementById('detail-title').oninput = (e) => {
          cat.title = e.target.value;
          saveData();
        };

        document.getElementById('detail-text').oninput = (e) => {
          cat.content = e.target.value;
          saveData();
        };
      }
    }

    function goBack() {
      selectedCategoryId = null;
      document.getElementById('header').classList.remove('hidden');
      document.getElementById('main-content').classList.remove('hidden');
      document.getElementById('detail-view').classList.add('hidden');
      render();
    }

    function renderEmojiSelector(containerId, selected, onChange) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      
      EMOJIS.forEach(emoji => {
        const btn = document.createElement('button');
        btn.className = `emoji-btn ${emoji === selected ? 'selected' : ''}`;
        btn.textContent = emoji;
        btn.onclick = () => {
          container.querySelectorAll('.emoji-btn').forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');
          onChange(emoji);
        };
        container.appendChild(btn);
      });
    }

    // Add Modal
    function showAddModal() {
      selectedEmoji = 'üíï';
      document.getElementById('add-title-input').value = '';
      document.getElementById('add-modal').classList.remove('hidden');
      renderEmojiSelector('add-emoji-selector', selectedEmoji, (emoji) => {
        selectedEmoji = emoji;
      });
    }

    function closeAddModal() {
      document.getElementById('add-modal').classList.add('hidden');
    }

    function addCategory() {
      const title = document.getElementById('add-title-input').value.trim();
      if (!title) return;
      
      data.categories.push({
        id: Date.now().toString(),
        title,
        content: '',
        emoji: selectedEmoji
      });
      saveData();
      closeAddModal();
      render();
    }

    function editCategory(id) {
      showDetail(id);
    }

    function deleteCategory(id) {
      if (confirm('M√∂chtest du diese Kategorie wirklich l√∂schen?')) {
        data.categories = data.categories.filter(c => c.id !== id);
        saveData();
        render();
      }
    }

    // Lock Modal
    function showLockModal() {
      document.getElementById('lock-modal').classList.remove('hidden');
    }

    function closeLockModal() {
      document.getElementById('lock-modal').classList.add('hidden');
    }

    function lockNote() {
      data.isLocked = true;
      saveData();
      closeLockModal();
      render();
    }

    // Header editing
    function editHeader() {
      if (data.isLocked) return;
      document.getElementById('header-display').classList.add('hidden');
      document.getElementById('header-edit').classList.remove('hidden');
      document.getElementById('title-input').value = data.title;
      document.getElementById('subtitle-input').value = data.subtitle;
    }

    function saveHeader() {
      data.title = document.getElementById('title-input').value || 'F√ºr dich ‚ô°';
      data.subtitle = document.getElementById('subtitle-input').value || 'Klicke auf eine Kategorie...';
      saveData();
      document.getElementById('header-display').classList.remove('hidden');
      document.getElementById('header-edit').classList.add('hidden');
      render();
    }

    // Make header editable on click (only if not locked)
    document.getElementById('header-display').onclick = () => {
      if (!data.isLocked) editHeader();
    };

    // Close modals on overlay click
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
      overlay.onclick = (e) => {
        if (e.target === overlay) {
          overlay.classList.add('hidden');
        }
      };
    });

    // Initial render
    render();
  </script>
</body>
</html>
